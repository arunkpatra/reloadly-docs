<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="Arun Patra">
<title>Fintech Platform Reference Implementation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Fintech Platform Reference Implementation</h1>
<div class="details">
<span id="author" class="author">Arun Patra</span><br>
<span id="email" class="email"><a href="https://twitter.com/arunkpatra">@arunkpatra</a></span><br>
<span id="revnumber">version 1.0.0,</span>
<span id="revdate">2021.04.27</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#source-code">1.1. Source Code</a></li>
</ul>
</li>
<li><a href="#summary-highlights">2. Code Challenge Summary</a></li>
<li><a href="#code-challenge-highlights">3. Code Challenge Highlights</a></li>
<li><a href="#getting-started">4. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#pre-requisites">4.1. Pre-requisites</a></li>
<li><a href="#githib-checkout">4.2. Build From Source</a></li>
<li><a href="#running-locally">4.3. Development Environment Setup</a>
<ul class="sectlevel3">
<li><a href="#starting-local-services">4.3.1. Starting Local Services</a></li>
<li><a href="#running-microservices">4.3.2. Running Microservices</a></li>
<li><a href="#cleanup">4.3.3. Cleanup</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#architecture">5. Architecture</a>
<ul class="sectlevel2">
<li><a href="#salient-points">5.1. Salient Points</a></li>
<li><a href="#design">5.2. Design</a></li>
</ul>
</li>
<li><a href="#microservices">6. Reloadly Services</a>
<ul class="sectlevel2">
<li><a href="#microservices-auth">6.1. Authentication Microservice</a>
<ul class="sectlevel3">
<li><a href="#api">6.1.1. API</a></li>
<li><a href="#module-dependencies">6.1.2. Module Dependencies</a></li>
</ul>
</li>
<li><a href="#microservices-acct">6.2. Account Microservice</a>
<ul class="sectlevel3">
<li><a href="#api-2">6.2.1. API</a></li>
<li><a href="#module-dependencies-2">6.2.2. Module Dependencies</a></li>
</ul>
</li>
<li><a href="#microservices-tx">6.3. Transaction Microservice</a>
<ul class="sectlevel3">
<li><a href="#api-3">6.3.1. API</a></li>
<li><a href="#module-dependencies-3">6.3.2. Module Dependencies</a></li>
</ul>
</li>
<li><a href="#microservices-tx-processor">6.4. Transaction Processor</a>
<ul class="sectlevel3">
<li><a href="#module-dependencies-4">6.4.1. Module Dependencies</a></li>
</ul>
</li>
<li><a href="#microservices-notif">6.5. Notification Microservice</a>
<ul class="sectlevel3">
<li><a href="#api-4">6.5.1. API</a></li>
<li><a href="#module-dependencies-5">6.5.2. Module Dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#components">7. Reloadly Modules</a>
<ul class="sectlevel2">
<li><a href="#email">7.1. Email</a></li>
<li><a href="#sms">7.2. SMS</a></li>
<li><a href="#security-integration">7.3. Security Integration</a></li>
<li><a href="#notification-integration">7.4. Notification Integration</a></li>
<li><a href="#swagger-ui-integration">7.5. Swagger UI Integration</a></li>
</ul>
</li>
<li><a href="#production-deployment">8. Production Deployment</a>
<ul class="sectlevel2">
<li><a href="#kubernetes-deployment-eks">8.1. Kubernetes Deployment (EKS)</a>
<ul class="sectlevel3">
<li><a href="#docker-images">8.1.1. Docker Images</a></li>
<li><a href="#helm-charts">8.1.2. Helm Charts</a></li>
</ul>
</li>
<li><a href="#aws-beanstalk-or-ec2-containers">8.2. AWS Beanstalk or EC2 Containers</a></li>
</ul>
</li>
<li><a href="#production-monitoring">9. Production Monitoring</a>
<ul class="sectlevel2">
<li><a href="#spring-boot-admin">9.1. Spring Boot Admin</a></li>
<li><a href="#grafana">9.2. Grafana</a></li>
<li><a href="#prometheus">9.3. Prometheus</a></li>
<li><a href="#loki">9.4. Loki</a></li>
</ul>
</li>
<li><a href="#product-dev-approach">10. Product Development Approach</a>
<ul class="sectlevel2">
<li><a href="#processes-and-methodology">10.1. Processes and Methodology</a></li>
<li><a href="#tools">10.2. Tools</a>
<ul class="sectlevel3">
<li><a href="#defect-management">10.2.1. Defect Management</a></li>
<li><a href="#release-management">10.2.2. Release Management</a></li>
<li><a href="#source-code-management">10.2.3. Source Code Management</a></li>
<li><a href="#cicd-and-automation">10.2.4. CI/CD and Automation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This project implements a hypothetical Fintech Platform.
It demonstrates Microservice architecture, design, best practices and production ready features.
It was developed as part of a code challenge from <a href="https://www.reloadly.com/">Reloadly</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>reloadly</strong> brand name, and logo are copyright of <a href="https://www.reloadly.com/">Reloadly</a>.
Permission is hereby granted to <a href="https://www.reloadly.com/">Reloadly</a> to review the architecture, design, source code and documentation of this project.
Usage of architecture, design, source code is also being granted to <a href="https://www.reloadly.com/">Reloadly</a> without any constraints, including the right to use in building production systems either in whole or part.</p>
</div>
<div class="paragraph">
<p>Unless required by applicable law or agreed to in writing, this software is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="source-code"><a class="anchor" href="#source-code"></a><a class="link" href="#source-code">1.1. Source Code</a></h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-github fa-2x"></i></span> Head over to the GitHub repository <a href="https://github.com/arunkpatra/reloadly-services">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-highlights"><a class="anchor" href="#summary-highlights"></a><a class="link" href="#summary-highlights">2. Code Challenge Summary</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The solution developed for the code challenge, embraces modern architectural styles, battle tested architectural principles and robust engineering practices.
The following features have been implemented.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/reloadly-solution-highlights-and-summary.png" alt="reloadly solution highlights and summary">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Items grayed out, are proposed.
Please see open issues in GitHub <a href="https://github.com/arunkpatra/reloadly-services/issues">here</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="code-challenge-highlights"><a class="anchor" href="#code-challenge-highlights"></a><a class="link" href="#code-challenge-highlights">3. Code Challenge Highlights</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>~ 12000 lines of code</strong> covered by JUnit tests.</p>
</li>
<li>
<p>Modern tech stack, event driven architecture and solid design principles.</p>
</li>
<li>
<p>Fully leverages Spring Boot Technology.</p>
</li>
<li>
<p>Advanced Spring Boot features including auto-configuration.</p>
</li>
<li>
<p>Ultra scalable and resilient transaction processor built on Kafka technology.</p>
</li>
<li>
<p>End to end enterprise security using dedicated Authentication Service designed to be used across the enterprise.</p>
</li>
<li>
<p>Production ready features, e.g. Spring Boot Admin.</p>
</li>
<li>
<p>Extensive documentation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a><a class="link" href="#getting-started">4. Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides documentation on setting up a local installation of the Reloadly Microservices.
Create an issue on GitHub <a href="https://github.com/arunkpatra/reloadly-services/issues">here</a> if you have questions or need help.</p>
</div>
<div class="sect2">
<h3 id="pre-requisites"><a class="anchor" href="#pre-requisites"></a><a class="link" href="#pre-requisites">4.1. Pre-requisites</a></h3>
<div class="paragraph">
<p>Following pre-requisites need to be fulfilled before you can run a fully functional instance of the platform on your local development environments.
The platform has been tested on macOS Big Sur.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Hardware</strong>: Either physical or virtual machines with minimum 8 GB RAM and 4 CPU Cores <em>(16 GB RAM, 8 CPU Cores if you want to do performance testing)</em>.</p>
</li>
<li>
<p><strong>Operating System</strong>: Windows(version 10+), macOS(version 10.15+), Linux (CentOS, RHEL, Ubuntu)</p>
</li>
<li>
<p><strong>Java</strong> - JDK 8, or JDK 11.</p>
</li>
<li>
<p><strong>Build Tool</strong> - Maven 3.6 or above</p>
</li>
<li>
<p><strong>Database</strong> - MySQL, locally running or remotely hosted.</p>
</li>
<li>
<p><strong>Kafka</strong> - Local instance with the broker server listening on port 9092. A remotely hosted Kafka cluster is acceptable as well.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Installation on macOS</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install JDK by following the instructions <a href="https://github.com/AdoptOpenJDK/homebrew-openjdk/blob/master/README.md">here</a>.
Please install JDK 8 or 11 only.
Other JDK versions have not been tested.</p>
</li>
<li>
<p>Install Apache Maven by following the instructions <a href="https://formulae.brew.sh/formula/maven">here</a>.</p>
</li>
<li>
<p>Install Apache Kafka by following the instructions <a href="https://formulae.brew.sh/formula/kafka">here</a>.</p>
</li>
<li>
<p>Install MySQL by following the instructions <a href="https://formulae.brew.sh/formula/mysql">here</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="githib-checkout"><a class="anchor" href="#githib-checkout"></a><a class="link" href="#githib-checkout">4.2. Build From Source</a></h3>
<div class="paragraph">
<p>Clone the git repository from GitHub into a directory of your choice.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone git@github.com:arunkpatra/reloadly-services.git</pre>
</div>
</div>
<div class="paragraph">
<p>Build code and run tests.
Build should pass, for you to proceed further with the rest of the chapter.
From the directory where you cloned the repository, issue the following commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd reloadly-services
mvn clean install</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The above commands will build code and run integration tests.
The build artifacts are installed to your local maven repository.
For building and running tests, you do NOT need a locally running Kafka and MySQL instance.
For running tests, in-memory instances of these resources are run.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="running-locally"><a class="anchor" href="#running-locally"></a><a class="link" href="#running-locally">4.3. Development Environment Setup</a></h3>
<div class="paragraph">
<p>This is useful, when you want to set a development environment and run all the microservices on a single local machine.
Kubernetes deployment support is coming up.
See  <a href="https://github.com/arunkpatra/reloadly-services/issues/17">this GitHub issue</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These instructions are for macOS.
Please tailor them to run in other environments like Windows and Linux.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="starting-local-services"><a class="anchor" href="#starting-local-services"></a><a class="link" href="#starting-local-services">4.3.1. Starting Local Services</a></h4>
<div class="paragraph">
<p>Following the steps below before running your microservices.</p>
</div>
<div class="sect4">
<h5 id="mysql-setup"><a class="anchor" href="#mysql-setup"></a><a class="link" href="#mysql-setup">MySQL Setup</a></h5>
<div class="paragraph">
<p>Issue the following commands.
You should have installed MySQL locally and verified it to work correctly as a pre-requisite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql.server start</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must secure your local MySQL installation and create a user with database wide access.
You can use the admin user for now, on your local machine.
See MySQL docs for more information.
Take a note of the username and password of the admin user; you will need it in a later step.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All database tables used by the microservices need to be created upfront in your local MySQL database instance.
As noted earlier, you do NOT need to do this for running integration tests since tests use in-memory Derby database.</p>
</div>
<div class="paragraph">
<p>Run the following scripts in order.</p>
</div>
<div class="sect5">
<h6 id="authentication-microservice-schema"><a class="anchor" href="#authentication-microservice-schema"></a><a class="link" href="#authentication-microservice-schema">Authentication Microservice Schema</a></h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> rlauthdb;
USE rlauthdb;

<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> api_key_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> username_password_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> authority_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> role_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> user_table;

<span class="comment">--
-- User table. Contains unique UIDs.</span>
<span class="comment">--
CREATE TABLE user_table</span>
(
    id     <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    uid    <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    active <span class="predefined-type">BOOLEAN</span> <span class="directive">DEFAULT</span> <span class="predefined-constant">true</span>
);

<span class="comment">--
-- Valid roles that may be assigned to a user.</span>
<span class="comment">--
create table role_table</span>
(
    id        <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    role_name <span class="predefined-type">VARCHAR</span>(<span class="integer">32</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>
);

<span class="comment">--
-- Authorities assigned to a user. Authorities are equivalent to roles in the current context.</span>
<span class="comment">--
CREATE TABLE authority_table</span>
(
    id        <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    uid       <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    authority <span class="predefined-type">VARCHAR</span>(<span class="integer">32</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    <span class="type">CONSTRAINT</span> unique_user_id_authority <span class="directive">UNIQUE</span> (uid, authority),
    <span class="type">CONSTRAINT</span> fk_igc_authority_user_name_igc_user_user_name
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (uid)
            <span class="keyword">REFERENCES</span> user_table (uid),
    <span class="type">CONSTRAINT</span> fk_igc_authority_authority_igc_role_role_name
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (authority)
            <span class="keyword">REFERENCES</span> role_table (role_name)
);

<span class="comment">--
-- Table supporting a username/password based authentication. Passwords are encrypted.</span>
<span class="comment">--
CREATE TABLE username_password_table</span>
(
    id        <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    user_name <span class="predefined-type">VARCHAR</span>(<span class="integer">64</span>)  <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    password  <span class="predefined-type">VARCHAR</span>(<span class="integer">128</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    uid       <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>)  <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    <span class="type">CONSTRAINT</span> fk_username_password_table_user_id_user_table
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (uid)
            <span class="keyword">REFERENCES</span> user_table (uid)
);

<span class="class">create</span> <span class="type">TABLE</span> api_key_table
(
    id      <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    uid     <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    api_key <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    active  <span class="predefined-type">BOOLEAN</span> <span class="directive">DEFAULT</span> <span class="predefined-constant">true</span>,
    <span class="type">CONSTRAINT</span> fk_api_key_table_uid_user_table
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (uid)
            <span class="keyword">REFERENCES</span> user_table (uid)
)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="account-microservice-schema"><a class="anchor" href="#account-microservice-schema"></a><a class="link" href="#account-microservice-schema">Account Microservice Schema</a></h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> rlacctdb;
USE rlacctdb;

<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> address_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> account_balance_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> account_table;

<span class="comment">--
-- Accounts table.</span>
<span class="comment">--
CREATE TABLE account_table</span>
(
    id           <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    uid          <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>)  <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>, <span class="comment">-- Only one account per user ID</span>
    account_id   <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>)  <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    name         <span class="predefined-type">VARCHAR</span>(<span class="integer">128</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    email        <span class="predefined-type">VARCHAR</span>(<span class="integer">128</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    phone_number <span class="predefined-type">VARCHAR</span>(<span class="integer">20</span>)  <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    currency_cd  <span class="predefined-type">VARCHAR</span>(<span class="integer">3</span>)   <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">USD</span><span class="delimiter">'</span></span>,
    active       <span class="predefined-type">BOOLEAN</span>               <span class="directive">DEFAULT</span> <span class="predefined-constant">TRUE</span>
);

<span class="comment">--
-- Account Balance table.</span>
<span class="comment">--
CREATE TABLE account_balance_table</span>
(
    id              <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    account_id      <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    account_balance <span class="predefined-type">FLOAT</span>       <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="float">0.0</span>,
    <span class="type">CONSTRAINT</span> fk_acct_balance_table_acct_id_acct_table
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (account_id)
            <span class="keyword">REFERENCES</span> account_table (account_id)
);

<span class="comment">--
-- Address table.</span>
<span class="comment">--
CREATE TABLE address_table</span>
(
    id             <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    account_id     <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    address_type   <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">BILLING</span><span class="delimiter">'</span></span>,
    address_line_1 <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    address_line_2 <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>),
    city           <span class="predefined-type">VARCHAR</span>(<span class="integer">64</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    state          <span class="predefined-type">VARCHAR</span>(<span class="integer">64</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    postal_code    <span class="predefined-type">VARCHAR</span>(<span class="integer">20</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    country        <span class="predefined-type">VARCHAR</span>(<span class="integer">64</span>),
    <span class="type">CONSTRAINT</span> fk_address_table_acct_id_acct_table
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (account_id)
            <span class="keyword">REFERENCES</span> account_table (account_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="transaction-microservice-schema"><a class="anchor" href="#transaction-microservice-schema"></a><a class="link" href="#transaction-microservice-schema">Transaction Microservice Schema</a></h6>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following script, sets up the tables needed for both the <code>transaction-processor</code> and the <code>transaction-service</code>.
See later sections for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> rltxndb;
USE rltxndb;

<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> money_reload_txn_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> airtime_send_txn_table;
<span class="class">DROP</span> <span class="type">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> transaction_table;
<span class="comment">--
-- Transaction table.</span>
<span class="comment">--
CREATE TABLE transaction_table</span>
(
    id         <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    uid        <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    txn_id     <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    txn_type   <span class="predefined-type">VARCHAR</span>(<span class="integer">16</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    txn_status <span class="predefined-type">VARCHAR</span>(<span class="integer">16</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
);

<span class="class">CREATE</span> <span class="type">TABLE</span> money_reload_txn_table
(
    id     <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    txn_id <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    amount <span class="predefined-type">FLOAT</span>       <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    <span class="type">CONSTRAINT</span> fk_money_reload_txn_table_txn_id
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (txn_id)
            <span class="keyword">REFERENCES</span> transaction_table (txn_id)
);

<span class="class">CREATE</span> <span class="type">TABLE</span> airtime_send_txn_table
(
    id           <span class="predefined-type">BIGINT</span> <span class="directive">AUTO_INCREMENT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
    txn_id       <span class="predefined-type">VARCHAR</span>(<span class="integer">40</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
    amount       <span class="predefined-type">FLOAT</span>       <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    phone_number <span class="predefined-type">VARCHAR</span>(<span class="integer">16</span>) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
    <span class="type">CONSTRAINT</span> fk_airtime_send_txn_table_txn_id
        <span class="directive">FOREIGN</span> <span class="type">KEY</span> (txn_id)
            <span class="keyword">REFERENCES</span> transaction_table (txn_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="seed-data"><a class="anchor" href="#seed-data"></a><a class="link" href="#seed-data">Seed Data</a></h6>
<div class="paragraph">
<p>This data must be seeded into the DB for system to work correctly.
It does nothing other than ading a service account and API key which is needed for inter-microservice communication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="comment">--
-- Data goes into the Auth Database</span>
<span class="comment">--
USE rlauthdb;</span>

<span class="comment">--
-- These roles must exist in the system, for application to work.</span>
<span class="comment">--
INSERT INTO role_table(role_name)</span>
<span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">ROLE_USER</span><span class="delimiter">'</span></span>),
       (<span class="string"><span class="delimiter">'</span><span class="content">ROLE_ADMIN</span><span class="delimiter">'</span></span>);

<span class="comment">--
-- This is for a Reloadly Service Account, which the system needs.</span>
<span class="comment">--
INSERT INTO user_table(uid, active)</span>
<span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">c1fe6f0d-420e-4161-a134-9c2342e36c95</span><span class="delimiter">'</span></span>, <span class="predefined-constant">true</span>);

<span class="comment">--
-- Service Account authorities.</span>
<span class="comment">--
INSERT INTO authority_table(uid, authority)</span>
<span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">c1fe6f0d-420e-4161-a134-9c2342e36c95</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ROLE_USER</span><span class="delimiter">'</span></span>),
       (<span class="string"><span class="delimiter">'</span><span class="content">c1fe6f0d-420e-4161-a134-9c2342e36c95</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ROLE_ADMIN</span><span class="delimiter">'</span></span>);

<span class="comment">--
-- Service Account credentials.</span>
<span class="comment">--
INSERT INTO username_password_table(user_name, password, uid)</span>
<span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">reloadly_svc_acct</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">$2a$10$OwuE74o7m2qCj7yTVgleGOhwuqrvbJZT2qwYCGtyUi6ITSjSqHEZy</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">c1fe6f0d-420e-4161-a134-9c2342e36c95</span><span class="delimiter">'</span></span>);

<span class="comment">--
-- API Key issued to 'reloadly_svc_acct' service account.</span>
<span class="comment">--
INSERT INTO api_key_table(uid, api_key, active)</span>
<span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">c1fe6f0d-420e-4161-a134-9c2342e36c95</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d3fe6f0d-120e-4161-a134-8c2342e36ca6</span><span class="delimiter">'</span></span>, <span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running these scripts, you must have the schemas correctly created and seed data populated.
Please verify.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="kafka-setup"><a class="anchor" href="#kafka-setup"></a><a class="link" href="#kafka-setup">Kafka Setup</a></h5>
<div class="paragraph">
<p>Issue the following commands.
You should have installed Kafka locally and verified it to work correctly as a pre-requisite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zookeeper-server-start -daemon /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A topic named <code>com.reloadly.inbound.txn.topic</code> is needed by the <code>transaction-processor</code> (Kafka consumer) and <code>transaction-service</code>(Kafka producer) components.
This topic is created on the fly by the transaction-service` if it does not exist.
While this is acceptable in non-production environments, it is discouraged in higher environments.
The <code>transaction-processor</code> listens to this topic and won&#8217;t process messages if this topic does not exist.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In your local environment, Kafka uses PLAINTEXT by default.
In other environments, you must use strong encryption.
Please refer Kafka documentation for securing a Kafka installation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="running-microservices"><a class="anchor" href="#running-microservices"></a><a class="link" href="#running-microservices">4.3.2. Running Microservices</a></h4>
<div class="paragraph">
<p>Follow the steps listed below in order to run all components of the platform locally.
You should folow these steps sequentially.</p>
</div>
<div class="sect4">
<h5 id="environment-variable-configuration"><a class="anchor" href="#environment-variable-configuration"></a><a class="link" href="#environment-variable-configuration">Environment Variable Configuration</a></h5>
<div class="paragraph">
<p>You would need to set the following Environment variables.
Use the method that&#8217;s appropriate for your operating system.
On macOS, you can export environment variables on the command line as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>export YOUR_ENV_VARIABLE=env_var_value</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment Variable</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB_USER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MySQL DB username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by all microservices that access the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB_PASSWORD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MySQL DB password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by all microservices that access the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS_ACCESS_KEY_ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your AWS account Access key ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send email via Amazon SES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS_SECRET_ACCESS_KEY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your AWS account Secret access key.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send email via Amazon SES.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EMAIL_DRY_RUN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> or <code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting <code>false</code> suppresses email sending. <code>true</code> will send actual emails.
You need to configure SES correctly in your AWS account.
See Amazon SES documentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENDER_EMAIL_ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sender email ID verified by AWS SES to send emails from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send email via Amazon SES.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWILIO_DRY_RUN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> or <code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting <code>false</code> suppresses SMS sending. <code>true</code> will send actual SMS messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWILIO_ACCOUNT_SID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your Twilio account SID.
Get it from your Twilio account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send SMS via Twilio (SMS charges will be applied by Twilio).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWILIO_AUTH_TOKEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your Twilio account auth token.
Get it from your Twilio account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send SMS via Twilio.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWILIO_MSG_SVC_ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your Twilio account Message Service ID.
Get it from your Twilio account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed to send SMS via Twilio.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RELOADLY_SVC_ACCT_API_KEY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The reloadly service account API key.
Use the value you inserted in the <a href="#seed-data">Seed Data</a> section.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed for the platform to work correctly.
Use the <code>api-key</code> value from the final <code>INSERT</code> statement in that script.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Consider writing a small shell script, or add these in your <code>~/.zprofile</code> or <code>~./bashprofile</code> file or a suitable method of your liking.
After adding, you should <code>source</code> these files for changes to take effect, e.g. <code>source ~/.zprofile</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You may add the following in the script.
Supply appropriate values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">#
# These properties are used by the platform microservices
#
export DB_USER=
export DB_PASSWORD=
export AWS_ACCESS_KEY_ID=
export AWS_SECRET_ACCESS_KEY=

# Change this to false, if you want to send actual emails.
export EMAIL_DRY_RUN=true
export SENDER_EMAIL_ID=

# Change this to false, if you want to send actual SMS. SMS charges may apply.
export TWILIO_DRY_RUN=true
export TWILIO_ACCOUNT_SID=
export TWILIO_AUTH_TOKEN=
export TWILIO_MSG_SVC_ID=

export RELOADLY_SVC_ACCT_API_KEY=</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="running-microservices-2"><a class="anchor" href="#running-microservices-2"></a><a class="link" href="#running-microservices-2">Running Microservices</a></h5>
<div class="paragraph">
<p>Run these services in sequence (recommended).
You must have done a <code>mvn clean install</code> from the root of your cloned repository.
That builds all microservices.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that, your MySQL server and Kafka instances are up and running before you proceed with the following steps.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="authentication-microservice"><a class="anchor" href="#authentication-microservice"></a><a class="link" href="#authentication-microservice">Authentication Microservice</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd authentication-service
mvn spring-boot:run</pre>
</div>
</div>
<div class="paragraph">
<p>Access Swagger UI of Authentication Microservice at <a href="http://localhost:9090/swagger-ui/" class="bare">localhost:9090/swagger-ui/</a></p>
</div>
</div>
<div class="sect5">
<h6 id="account-microservice"><a class="anchor" href="#account-microservice"></a><a class="link" href="#account-microservice">Account Microservice</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd account-service
mvn spring-boot:run</pre>
</div>
</div>
<div class="paragraph">
<p>Access Swagger UI of Authentication Microservice at <a href="http://localhost:8080/swagger-ui/" class="bare">localhost:8080/swagger-ui/</a></p>
</div>
</div>
<div class="sect5">
<h6 id="transaction-microservice"><a class="anchor" href="#transaction-microservice"></a><a class="link" href="#transaction-microservice">Transaction Microservice</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd transaction-service
mvn spring-boot:run</pre>
</div>
</div>
<div class="paragraph">
<p>Access Swagger UI of Authentication Microservice at <a href="http://localhost:8081/swagger-ui/" class="bare">localhost:8081/swagger-ui/</a></p>
</div>
</div>
<div class="sect5">
<h6 id="notification-microservice"><a class="anchor" href="#notification-microservice"></a><a class="link" href="#notification-microservice">Notification Microservice</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd notification-service
mvn spring-boot:run</pre>
</div>
</div>
<div class="paragraph">
<p>Access Swagger UI of Authentication Microservice at <a href="http://localhost:8082/swagger-ui/" class="bare">localhost:8082/swagger-ui/</a></p>
</div>
</div>
<div class="sect5">
<h6 id="transaction-processor"><a class="anchor" href="#transaction-processor"></a><a class="link" href="#transaction-processor">Transaction Processor</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd transaction-processor
mvn spring-boot:run</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="spring-boot-admin-app"><a class="anchor" href="#spring-boot-admin-app"></a><a class="link" href="#spring-boot-admin-app">Spring Boot Admin App</a></h6>
<div class="paragraph">
<p>Issue these commands from the root of your cloned repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd admin-service
mvn spring-boot:run</pre>
</div>
</div>
<div class="paragraph">
<p>Access the Admin Service Dashboard at <a href="http://localhost:9595/" class="bare">localhost:9595/</a>.
You should see the following dashboard once all your services register with the Spring Boot Admin app.
You should navigate to the <code>Wallboard</code> tab of the Spring Boot Admin UI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/spring-boot-admin.png" alt="spring boot admin">
</div>
</div>
<div class="paragraph">
<p>Congratulations!
Your services are running.</p>
</div>
<div class="paragraph">
<p>Now head over to the documentation of individual microservices for more details.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cleanup"><a class="anchor" href="#cleanup"></a><a class="link" href="#cleanup">4.3.3. Cleanup</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Shutdown your locally running MySQL instance.</p>
<div class="literalblock">
<div class="content">
<pre>mysql.server stop</pre>
</div>
</div>
</li>
<li>
<p>Now kill the Kafka process that you had started earlier by hitting <code>CTRL + C</code> in the terminal window where Kafka is running.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a><a class="link" href="#architecture">5. Architecture</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Architecture envisioned has been depicted in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/reloadly-arch.svg" alt="reloadly arch">
</div>
</div>
<div class="sect2">
<h3 id="salient-points"><a class="anchor" href="#salient-points"></a><a class="link" href="#salient-points">5.1. Salient Points</a></h3>
<div class="ulist">
<ul>
<li>
<p>The client facing microservices are Authentication, Account and Transaction.</p>
</li>
<li>
<p>The Transaction microservice, posts inbound transactions to Kafka and also maintains transaction status in its DB.
Transaction microservice is this a Kafka Producer.</p>
</li>
<li>
<p>The Transaction Processor is a Kafka Consumer and potentially runs a number of instances.
All instances are part of a Kafka consumer group.</p>
</li>
<li>
<p>Transaction processor updates transaction status once processed.
Transactions can be retried.</p>
</li>
<li>
<p>Notification microservice is called internally by other microservices and transaction processor.</p>
</li>
<li>
<p>Authentication microservice is used to issue JWT tokens, User signup, token verification, API key verification etc.</p>
</li>
<li>
<p>All microservices are secured using Spring Security.
Inbound HTTP requests into any microservice are expected to carry either an Auth service issued JWT token, or a valid API key.
Security infrastructure will validate tokens with Auth service.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="design"><a class="anchor" href="#design"></a><a class="link" href="#design">5.2. Design</a></h3>
<div class="paragraph">
<p>The Authentication, Account, Transaction and Notification microservices are Spring Boot applications.
Each microservice embraces Domain Driven Design (DDD).
Each microservice is responsible for managing data for the domain model it manages.</p>
</div>
<div class="paragraph">
<p>Additionally, for monitoring, A Spring Boot Admin app is utilized (not shown in illustration above); its optional.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microservices"><a class="anchor" href="#microservices"></a><a class="link" href="#microservices">6. Reloadly Services</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="microservices-auth"><a class="anchor" href="#microservices-auth"></a><a class="link" href="#microservices-auth">6.1. Authentication Microservice</a></h3>
<div class="paragraph">
<p>The Authentication service allows multiple enterprise facilities like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User signup - Currently username and password based login is supported.
Can be extended to other auth channels.
Users are issued JWT tokens.</p>
</li>
<li>
<p>Signup - Users can signup by choosing a username and password.</p>
</li>
<li>
<p>Token Verification - Verify JWT tokens.</p>
</li>
<li>
<p>API Key verification and issue functions.
API keys are issued to users and service accounts.</p>
</li>
<li>
<p>All other microservices call into the Auth Service to validate tokens and API keys.
It is a foundational service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See Swagger UI for API documentation.
It&#8217;s available at <a href="http://localhost:9090/swagger-ui/" class="bare">localhost:9090/swagger-ui/</a> when you run your services locally.</p>
</div>
<div class="sect3">
<h4 id="api"><a class="anchor" href="#api"></a><a class="link" href="#api">6.1.1. API</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/auth-microservice.png" alt="auth microservice">
</div>
</div>
</div>
<div class="sect3">
<h4 id="module-dependencies"><a class="anchor" href="#module-dependencies"></a><a class="link" href="#module-dependencies">6.1.2. Module Dependencies</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/authentication-service-deps.png" alt="authentication service deps">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="microservices-acct"><a class="anchor" href="#microservices-acct"></a><a class="link" href="#microservices-acct">6.2. Account Microservice</a></h3>
<div class="paragraph">
<p>The Account microservice, allows interacting with Account domain model.
Various update and query operations can be performed.</p>
</div>
<div class="paragraph">
<p>See Swagger UI for API documentation.
It&#8217;s available at <a href="http://localhost:8080/swagger-ui/" class="bare">localhost:8080/swagger-ui/</a> when you run your services locally.</p>
</div>
<div class="sect3">
<h4 id="api-2"><a class="anchor" href="#api-2"></a><a class="link" href="#api-2">6.2.1. API</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/acct-microservice.png" alt="acct microservice">
</div>
</div>
</div>
<div class="sect3">
<h4 id="module-dependencies-2"><a class="anchor" href="#module-dependencies-2"></a><a class="link" href="#module-dependencies-2">6.2.2. Module Dependencies</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/account-service-deps.png" alt="account service deps">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="microservices-tx"><a class="anchor" href="#microservices-tx"></a><a class="link" href="#microservices-tx">6.3. Transaction Microservice</a></h3>
<div class="paragraph">
<p>The Transaction service allows users to initiate user transactions, like money reload and airtime send operations.
Note that, the transaction service, accepts user requests and posts to a reliable and resilient Kafka cluster.
It also persists the user request in persistent storage so that that its status can be queries.
User requests return immediately.
The transactions posted to Kafka are picked up later asynchronously by the <strong>Transaction Processor</strong> component.</p>
</div>
<div class="paragraph">
<p>See Swagger UI for API documentation.
It&#8217;s available at <a href="http://localhost:8081/swagger-ui/" class="bare">localhost:8081/swagger-ui/</a> when you run your services locally.</p>
</div>
<div class="sect3">
<h4 id="api-3"><a class="anchor" href="#api-3"></a><a class="link" href="#api-3">6.3.1. API</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/txn-microservice.png" alt="txn microservice">
</div>
</div>
</div>
<div class="sect3">
<h4 id="module-dependencies-3"><a class="anchor" href="#module-dependencies-3"></a><a class="link" href="#module-dependencies-3">6.3.2. Module Dependencies</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/transaction-service-deps.png" alt="transaction service deps">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="microservices-tx-processor"><a class="anchor" href="#microservices-tx-processor"></a><a class="link" href="#microservices-tx-processor">6.4. Transaction Processor</a></h3>
<div class="paragraph">
<p>The Transaction Processor is at the heart of the platform and has the responsibility of processing inbound user transactions.
The transactions could be related to any business functionality, like sending airtime or reloading money into your own account.
Business operations that are ideally suited to be routed to the transaction processor are those that are potentially expensive and have strict guarantees to fulfill.
Also, such operations may be retried e.g. a airtime send operation may be retried.</p>
</div>
<div class="paragraph">
<p>The transaction processor listens to transaction requests that are processed to Kafka.
Part of the objective here is to scale the transaction processing horizontally.
Kafka listeners(and the transaction processing is one) can for consumer groups.
Essentially, when the transaction processor is deployed for example to a Kubernetes cluster, one could scale very easily by increasing/decreasing the number of replicas.
All the other production grade features of Kafka are available by default to the transaction processor.</p>
</div>
<div class="paragraph">
<p>Once the Transaction Processor processes a transaction, it ensures that notifications are sent out to the user so that they know the status of the transaction.</p>
</div>
<div class="sect3">
<h4 id="module-dependencies-4"><a class="anchor" href="#module-dependencies-4"></a><a class="link" href="#module-dependencies-4">6.4.1. Module Dependencies</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/transaction-processor-deps.png" alt="transaction processor deps">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="microservices-notif"><a class="anchor" href="#microservices-notif"></a><a class="link" href="#microservices-notif">6.5. Notification Microservice</a></h3>
<div class="paragraph">
<p>The Notification microservice allows sending emails and SMS messages.
Endpoints are provided for callers to invoke these facilities as REST API calls.</p>
</div>
<div class="paragraph">
<p>For Email, Amazon SES is used.
For SMS, Twilio is used.
Other email or SMS providers could be plugged in transparently since the required abstractions exist to easily swap out implementations.</p>
</div>
<div class="paragraph">
<p>See Swagger UI for API documentation.
It&#8217;s available at <a href="http://localhost:8082/swagger-ui/" class="bare">localhost:8082/swagger-ui/</a> when you run your services locally.</p>
</div>
<div class="sect3">
<h4 id="api-4"><a class="anchor" href="#api-4"></a><a class="link" href="#api-4">6.5.1. API</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/notification-microservice.png" alt="notification microservice">
</div>
</div>
</div>
<div class="sect3">
<h4 id="module-dependencies-5"><a class="anchor" href="#module-dependencies-5"></a><a class="link" href="#module-dependencies-5">6.5.2. Module Dependencies</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/notification-service-deps.png" alt="notification service deps">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components"><a class="anchor" href="#components"></a><a class="link" href="#components">7. Reloadly Modules</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foundational modules are reusable pieces of software that can be easily integrated in other modules.
The following modules are used in the rest of the platform.
Note that, in a Microservices architecture, individual microservices should share reusable code only if makes sense and if sharable code is well managed by a team which keeps pace with others.</p>
</div>
<div class="sect2">
<h3 id="email"><a class="anchor" href="#email"></a><a class="link" href="#email">7.1. Email</a></h3>
<div class="paragraph">
<p>This module supports email sending facilities.
This is a drop-in solution.
Add the following dependency in any Spring Boot application and Spring Boot Autoconfiguration would wire the necessary beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.reloadly<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>email-integration<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This component is configurable.
See the configuration properties of this module.</p>
</div>
</div>
<div class="sect2">
<h3 id="sms"><a class="anchor" href="#sms"></a><a class="link" href="#sms">7.2. SMS</a></h3>
<div class="paragraph">
<p>This module supports SMS sending facilities.
This is a drop-in solution.
Add the following dependency in any Spring Boot application and Spring Boot Autoconfiguration would wire the necessary beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.reloadly<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>sms-integration<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This component is configurable.
See the configuration properties of this module.</p>
</div>
</div>
<div class="sect2">
<h3 id="security-integration"><a class="anchor" href="#security-integration"></a><a class="link" href="#security-integration">7.3. Security Integration</a></h3>
<div class="paragraph">
<p>This module automatically secures all Web API endpoints with Auth Service security via Spring Security.
This is a drop-in solution.
Add the following dependency in any Spring Boot application and Spring Boot Autoconfiguration would wire the necessary beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.reloadly<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>security-integration<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This component is configurable.
See the configuration properties of this module.</p>
</div>
</div>
<div class="sect2">
<h3 id="notification-integration"><a class="anchor" href="#notification-integration"></a><a class="link" href="#notification-integration">7.4. Notification Integration</a></h3>
<div class="paragraph">
<p>This module integrates Notification Service via an SDK.
You would not need to make REST API calls to send out notifications, and use a Java API instead.
The Java API wraps the REST AP calls into the Notification microservice.
This is a drop-in solution.
Add the following dependency in any Spring Boot application and Spring Boot Autoconfiguration would wire the necessary beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.reloadly<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>notification-integration<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This component is configurable.
See the configuration properties of this module.</p>
</div>
</div>
<div class="sect2">
<h3 id="swagger-ui-integration"><a class="anchor" href="#swagger-ui-integration"></a><a class="link" href="#swagger-ui-integration">7.5. Swagger UI Integration</a></h3>
<div class="paragraph">
<p>This module adds Swagger UI integration to any Spring Boot app.
This is a drop-in solution.
Add the following dependency in any Spring Boot application and Spring Boot Autoconfiguration would wire the necessary beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.reloadly<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>swagger-ui-integration<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This component is configurable.
See the configuration properties of this module.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="production-deployment"><a class="anchor" href="#production-deployment"></a><a class="link" href="#production-deployment">8. Production Deployment</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The individual microservices may be run as standalone spring boot applications in lower environments.
However, for production like environments, where HA, failover and scalability needs exist, a suitable approach may be taken.
We discuss some aspects and approaches below.</p>
</div>
<div class="sect2">
<h3 id="kubernetes-deployment-eks"><a class="anchor" href="#kubernetes-deployment-eks"></a><a class="link" href="#kubernetes-deployment-eks">8.1. Kubernetes Deployment (EKS)</a></h3>
<div class="paragraph">
<p>See this GitHub <a href="https://github.com/arunkpatra/reloadly-services/issues/17">issue</a>.</p>
</div>
<div class="paragraph">
<p>Kubernetes would be the ideal way to run and scale the microservices of this platform.
Of special interest is the transaction processor which necessarily needs to scale based on transaction volumes.
Some aspects to note are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It&#8217;s best to keep databases out of Kubernetes.
Consider having a managed database service from a cloud provider like AWS or GCP.</p>
</li>
<li>
<p>Microservices including the transaction processor should be Dockerized and docker images should be created in the build pipeline.
Store images in an organizational Docker Registry or a hosted one.</p>
</li>
<li>
<p>Consider a managed Kubernetes Service like Amazon EKS of Google GKE.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="docker-images"><a class="anchor" href="#docker-images"></a><a class="link" href="#docker-images">8.1.1. Docker Images</a></h4>
<div class="ulist">
<ul>
<li>
<p>Docker images can be easily created by the Spring Boot maven plugin which currently support creation of Docker images natively.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="helm-charts"><a class="anchor" href="#helm-charts"></a><a class="link" href="#helm-charts">8.1.2. Helm Charts</a></h4>
<div class="paragraph">
<p>As a best practice, consider using Helm Charts to easily manage deployments and deployment environments.
It&#8217;s beneficial to use Helm Charts since it allows for easy rollback.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="aws-beanstalk-or-ec2-containers"><a class="anchor" href="#aws-beanstalk-or-ec2-containers"></a><a class="link" href="#aws-beanstalk-or-ec2-containers">8.2. AWS Beanstalk or EC2 Containers</a></h3>
<div class="paragraph">
<p>While deployment to AWS Beanstalk or EC2 containers is possible, it should probably make sense only for small deployments.
Managing these environments is fraught with errors and do not support automation very well.
For modern microservice deployment strategies consider using Helm Charts and Kubernetes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="production-monitoring"><a class="anchor" href="#production-monitoring"></a><a class="link" href="#production-monitoring">9. Production Monitoring</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Production monitoring is a necessary part of operations, and the right tools need to be utilized to get the job done.</p>
</div>
<div class="sect2">
<h3 id="spring-boot-admin"><a class="anchor" href="#spring-boot-admin"></a><a class="link" href="#spring-boot-admin">9.1. Spring Boot Admin</a></h3>
<div class="paragraph">
<p>This is a great tool to have full visibility into the runtime of Spring Boot Apps over HTTP(S).
This is currently supported.
One can easily integrate logfile viewers.
SBA supports discovery in Kubernetes environments as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="grafana"><a class="anchor" href="#grafana"></a><a class="link" href="#grafana">9.2. Grafana</a></h3>
<div class="paragraph">
<p>See this GitHub <a href="https://github.com/arunkpatra/reloadly-services/issues/22">issue</a>.</p>
</div>
<div class="paragraph">
<p>Grafana provides powerful dashboards that can display any application metrics and other performance parameters sent to it.
It as excellent integration with Spring and plays well in Kubernetes deployments.
See <a href="https://grafana.com/" class="bare">grafana.com/</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="prometheus"><a class="anchor" href="#prometheus"></a><a class="link" href="#prometheus">9.3. Prometheus</a></h3>
<div class="paragraph">
<p>Prometheus is a leading tool to gather metrics from applications and route to Grafana for powerful visualizations.
Excellent support exists in the Spring ecosystem and it plays well in Kubernetes deployments.
See <a href="https://prometheus.io/" class="bare">prometheus.io/</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="loki"><a class="anchor" href="#loki"></a><a class="link" href="#loki">9.4. Loki</a></h3>
<div class="paragraph">
<p>Loki is a popular choice for log aggregation and integrates well with Grafana.
For more details see <a href="https://grafana.com/oss/loki/" class="bare">grafana.com/oss/loki/</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="product-dev-approach"><a class="anchor" href="#product-dev-approach"></a><a class="link" href="#product-dev-approach">10. Product Development Approach</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Product development in the Microservices world has its benefits, but it needs a certain approach, culture and the appropriate tools.</p>
</div>
<div class="paragraph">
<p>The Microservices paradigm, is part technology and part organizational culture.
It closely ties with the Agile manifesto.
Microservices architecture make adequate sense when the size of the business, the organization and the domain justifies it.
Eventually Microservice boundaries would align with team boundaries.
That reflects in code organization as well. if these nuances are overlooked, it&#8217;s very easy to get the entire Microservices approach wrong and rack up huge technical debts in the mid to long term.
Microservices done the right way, with the right team organization and tools will go a long way towards increasing developer productivity and keep operational costs low.</p>
</div>
<div class="sect2">
<h3 id="processes-and-methodology"><a class="anchor" href="#processes-and-methodology"></a><a class="link" href="#processes-and-methodology">10.1. Processes and Methodology</a></h3>
<div class="paragraph">
<p>Some salient points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Consider adopting Agile methodology for software development and delivery.</p>
</li>
<li>
<p>Consider aligning team boundaries with Microservice domain boundaries.
As an example, a dedicated team to work on Account Microservices may be formed.
This team should own the software development, release planning and deployment for this microservice.
As a best practice, deployment of this microservice should not have software "build time" dependencies with any other microservice.
Additionally, the database should be exclusively used by this microservice.</p>
</li>
<li>
<p>Team size should not exceed 5-7 team members with members being full stack engineers.</p>
</li>
<li>
<p>Consider Scrum of Scrums to align all teams well in advance.</p>
</li>
<li>
<p>Scrum meetings (daily standup meetings) may be used.
However, this is falling out of fashion and may not work very well in distributed agile.
Also consider effective usage of tools like GitHub issues, Gitter, Discord Server, GitHib Discussions etc.
These tool go a long way towards increasing productivity.</p>
</li>
<li>
<p>Consider fortnightly software release cycles.</p>
</li>
<li>
<p>Agile Scrum teams are best led by a Project Lead.
The project lead has the responsibility and authority to manage software, reviews, merging and releasing.
Each microservice should have a project lead, and a team attached to it.</p>
</li>
<li>
<p>A Product Owner or Product Manager is responsible for managing business requirements and planning.
A PO can be assigned to multiple logically grouped teams.
A PO has no authority over engineering teams but fully owns requirements and what should be delivered in a particular release.</p>
</li>
<li>
<p>Consider a culture of merging often and releasing often.</p>
</li>
<li>
<p>Consider automating every single manual process that you can afford to.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="tools"><a class="anchor" href="#tools"></a><a class="link" href="#tools">10.2. Tools</a></h3>
<div class="paragraph">
<p>Following tools are recommended for their wide adoption, excellent usability and reliability.
==== Team Communication</p>
</div>
<div class="paragraph">
<p>Consider Slack.
Consider creating multiple channels as needed and add the right apps, e.g. GitHub, Confluence, Miro etc to Slack.</p>
</div>
<div class="sect3">
<h4 id="defect-management"><a class="anchor" href="#defect-management"></a><a class="link" href="#defect-management">10.2.1. Defect Management</a></h4>
<div class="paragraph">
<p>Consider using Jira for defect management, Integrate with Slack.</p>
</div>
</div>
<div class="sect3">
<h4 id="release-management"><a class="anchor" href="#release-management"></a><a class="link" href="#release-management">10.2.2. Release Management</a></h4>
<div class="paragraph">
<p>Consider release planning and management in GitHub.</p>
</div>
</div>
<div class="sect3">
<h4 id="source-code-management"><a class="anchor" href="#source-code-management"></a><a class="link" href="#source-code-management">10.2.3. Source Code Management</a></h4>
<div class="paragraph">
<p>GitHub is the leading platform for DVCS and is recommended.
It provides a full set of umbrella services suited for moder teams following industry best practices.</p>
</div>
</div>
<div class="sect3">
<h4 id="cicd-and-automation"><a class="anchor" href="#cicd-and-automation"></a><a class="link" href="#cicd-and-automation">10.2.4. CI/CD and Automation</a></h4>
<div class="paragraph">
<p>Consider GitHub Actions and/or other suitable tools to facilitate depployment to Kubernetes.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.0<br>
</div>
</div>
</body>
</html>